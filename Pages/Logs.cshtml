@page
@model SteamCmdWebAPI.Pages.LogsModel
@{
    ViewData["Title"] = "Nhật ký";
}

<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Nhật ký hệ thống</h3>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-bordered table-striped">
                            <thead>
                                <tr>
                                    <th>Thời gian</th>
                                    <th>Profile</th>
                                    <th>Trạng thái</th>
                                    <th>Nội dung</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var log in Model.Logs)
                                {
                                    <tr class="@(log.Status.Equals("Success", StringComparison.OrdinalIgnoreCase) ? "table-success" : "")">
                                        <td>@log.Timestamp.ToString("yyyy-MM-dd HH:mm:ss")</td>
                                        <td>@log.ProfileName</td>
                                        <td>@log.Status</td>
                                        <td>@log.Message</td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>

                    @if (Model.TotalPages > 1)
                    {
                        <nav aria-label="Page navigation">
                            <ul class="pagination justify-content-center">
                                @if (Model.CurrentPage > 1)
                                {
                                    <li class="page-item">
                                        <a class="page-link" href="/Logs?page=@(Model.CurrentPage - 1)">Trước</a>
                                    </li>
                                }

                                @for (int i = 1; i <= Model.TotalPages; i++)
                                {
                                    <li class="page-item @(i == Model.CurrentPage ? "active" : "")">
                                        <a class="page-link" href="/Logs?page=@i">@i</a>
                                    </li>
                                }

                                @if (Model.CurrentPage < Model.TotalPages)
                                {
                                    <li class="page-item">
                                        <a class="page-link" href="/Logs?page=@(Model.CurrentPage + 1)">Sau</a>
                                    </li>
                                }
                            </ul>
                        </nav>
                    }

                    <div class="text-center mt-3">
                        <small class="text-muted">
                            Hiển thị @Model.Logs.Count trong tổng số @Model.TotalLogs log
                        </small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="card mb-4">
    <div class="card-header bg-info text-white">
        <h5>Mã Lỗi SteamCMD</h5>
    </div>
    <div class="card-body">
        <div class="table-container">
            <table class="table">
                <thead>
                    <tr>
                        <th>Mã lỗi</th>
                        <th>Mô tả</th>
                        <th>Cách khắc phục</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>0</td>
                        <td>Thành công hoàn toàn</td>
                        <td>Không cần xử lý, quá trình cài đặt/cập nhật đã hoàn tất</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>Lỗi chung không xác định</td>
                        <td>Kiểm tra kết nối mạng, khởi động lại máy tính và thử lại</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Đã cài đặt và cập nhật mới nhất</td>
                        <td>Không cần xử lý, game đã được cập nhật đến phiên bản mới nhất</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>Lỗi đăng nhập Steam</td>
                        <td>Kiểm tra lại thông tin đăng nhập, xác minh rằng tài khoản không bị khóa</td>
                    </tr>
                    <tr>
                        <td>5</td>
                        <td>Rate Limit Exceeded (Vượt quá giới hạn truy cập)</td>
                        <td>Quá nhiều yêu cầu gửi đến máy chủ Steam, đợi 10-15 phút trước khi thử lại</td>
                    </tr>
                    <tr>
                        <td>6</td>
                        <td>Lỗi không đủ quyền truy cập thư mục</td>
                        <td>Chạy ứng dụng với quyền quản trị, kiểm tra quyền thư mục cài đặt</td>
                    </tr>
                    <tr>
                        <td>7</td>
                        <td>Lỗi không đủ dung lượng ổ đĩa</td>
                        <td>Kiểm tra và dọn dẹp không gian ổ đĩa, đảm bảo có ít nhất 5GB trống</td>
                    </tr>
                    <tr>
                        <td>8</td>
                        <td>Lỗi kết nối mạng hoặc máy chủ Steam</td>
                        <td>Kiểm tra kết nối internet, máy chủ Steam có thể đang bảo trì</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>